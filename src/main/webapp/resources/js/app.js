!function(){"use strict";var r=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,s=r.call(t),o=[];try{for(;(void 0===e||0<e--)&&!(n=s.next()).done;)o.push(n.value)}catch(t){a={error:t}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(a)throw a.error}}return o},m=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t};var c="/image-gallery-js";function o(s,n){var o,a,i,l,d;function c(t){t.preventDefault(),t.dataTransfer.dropEffect="move";var e,r,n,a=t.target;a&&a!==o&&"DIV"==a.nodeName&&(r=(e=a.getBoundingClientRect()).right-e.width/2,n=t.clientX<d&&(t.clientX-i<r||t.clientY-l<r)?a:a.nextSibling,s.insertBefore(o,n))}function u(t){var e,r;t.preventDefault(),o.classList.remove("opacity-25","border","border-dashed"),s.removeEventListener("dragover",c),s.removeEventListener("dragend",u),e=s.children,r=e.length,m(e).forEach(function(t,e){return t.dataset.order=r-e}),a!==o.nextSibling&&n(o),m(s.children).forEach(function(t){return t.classList.add("hover:bg-blue-200")})}s.addEventListener("dragstart",function(t){o=t.target,a=o.nextElementSibling,d=t.clientX,i=t.clientX-o.getBoundingClientRect().x,o.getBoundingClientRect().right,t.clientX,l=t.clientY-o.getBoundingClientRect().top,o.getBoundingClientRect().bottom,t.clientY,m(s.children).forEach(function(t){return t.classList.remove("hover:bg-blue-200")}),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/html",o.innerHTML),s.addEventListener("dragover",c),s.addEventListener("dragend",u),setTimeout(function(){o.classList.add("opacity-25","border","border-dashed")},0)})}var n=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,s=r.call(t),o=[];try{for(;(void 0===e||0<e--)&&!(n=s.next()).done;)o.push(n.value)}catch(t){a={error:t}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(a)throw a.error}}return o},l=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t},u=(Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(t){this._state=new Proxy(t,this.proxyHandler()),this.efficientRender()},enumerable:!1,configurable:!0}),t.prototype.attach=function(t){"array"===this.typeOf(t)?this.children.concat(t):this.children.push(t)},t.prototype.detach=function(e){var r="array"===this.typeOf(e);this.children=this.children.filter(function(t){return r?-1===e.indexOf(t):t!==e})},t.prototype.efficientRender=function(){var t=this;this.efficiency&&window.cancelAnimationFrame(this.efficiency),this.efficiency=window.requestAnimationFrame(function(){return t.render()})},t.prototype.typeOf=function(t){return void 0===t?"undefined":null===t?"null":t.toString().slice(8,-1).toLowerCase()},t.prototype.proxyHandler=function(){var n=this;return{get:function(t,e){return-1<["object","array"].indexOf(n.typeOf(t[e]))?new Proxy(t[e],n.proxyHandler()):t[e]},set:function(t,e,r){return t[e]===r||(t[e]=r,n.efficientRender()),!0},deleteProperty:function(t,e){return delete t[e],n.efficientRender(),!0}}},t.prototype.stringComponent=function(t){return(new DOMParser).parseFromString(t,"text/html").body},t.prototype.getNodeType=function(t){return 3===t.nodeType?"text":8===t.nodeType?"comment":t.tagName.toLowerCase()},t.prototype.getNodeContent=function(t){return t.childNodes&&0<t.childNodes.length?null:t.textContent},t.prototype.getStyleMap=function(t){return t.split(";").reduce(function(t,e){var r=e.indexOf(":");return r&&t.push({name:e.slice(0,r).trim(),value:e.slice(r+1).trim()}),t},[])},t.prototype.removeStyles=function(e,t){t.forEach(function(t){return e.style[t]=""})},t.prototype.changeStyles=function(e,t){t.forEach(function(t){return e.style[t.name]=t.value})},t.prototype.diffStyles=function(r,t){var n=this.getStyleMap(t),e=l(r.style).filter(function(e){return void 0===n.find(function(t){return t.name===e&&t.value===r.style[e]})});this.removeStyles(r,e),this.changeStyles(r,n)},t.prototype.addAttributes=function(e,t){var r=this;t.forEach(function(t){if("class"===t.att)e.className=t.value;else if("style"===t.att)r.diffStyles(e,t.value);else{if(t.att in e)try{e[t.att]=t.value,e[t.att]||0===e[t.att]||(e[t.att]=!0)}catch(t){}try{e.setAttribute(t.att,t.value)}catch(t){}}})},t.prototype.removeAttributes=function(e,t){var r=this;t.forEach(function(t){if("class"===t.att)e.className="";else if("style"===t.att)r.removeStyles(e,l(e.style).slice());else{if(t.att in e)try{e[t.att]=""}catch(t){}try{e.removeAttribute(t.att)}catch(t){}}})},t.prototype.getDynamicAttributes=function(e,r,n){var a=this;["checked","value"].forEach(function(t){!e[t]&&0!==e[t]||n&&"option"===e.tagName.toLowerCase()&&"selected"===t||n&&"select"===e.tagName.toLowerCase()&&"value"===t||r.push(a.getAttribute(t,e[t]))})},t.prototype.getBaseAttributes=function(t,r){var n=this;return l(t.attributes).reduce(function(t,e){return!(["checked","value"].indexOf(e.name)<0||r&&"selected"===e.name)||7<e.name.length&&"default"===e.name.slice(0,7)||t.push(n.getAttribute(e.name,e.value)),t},[])},t.prototype.getAttribute=function(t,e){return{att:t,value:e}},t.prototype.getAttributes=function(t,e){if(1!==t.nodeType)return[];var r=this.getBaseAttributes(t,e);return this.getDynamicAttributes(t,r,e),r},t.prototype.diffAtts=function(t,e){var r=this.getAttributes(t,!0),n=this.getAttributes(e,!1),a=n.filter(function(e){return!(-1<["checked","value"].indexOf(e.att))&&void 0===r.find(function(t){return e.att===t.att})}),s=r.filter(function(e){var t=n.find(function(t){return e.att===t.att});return void 0===t||t.value!==e.value});this.addAttributes(e,s),this.removeAttributes(e,a)},t.prototype.diffingDOM=function(t,a,s){var o=this,i=l(a.childNodes).slice(),e=l(t.childNodes).slice(),r=i.length-e.length;if(0<r)for(;0<r;r--)i[i.length-r].parentNode.removeChild(i[i.length-r]);e.forEach(function(e,t){if(i[t])if(o.getNodeType(e)===o.getNodeType(i[t])){if(o.diffAtts(e,i[t]),!(0<s.filter(function(t){return 3!==e.nodeType&&e.matches(t)}).length)){var r=o.getNodeContent(e);if(r&&r!==o.getNodeContent(i[t])&&(i[t].textContent=r),0<i[t].childNodes.length&&e.childNodes.length<1)i[t].innerHTML="";else{if(i[t].childNodes.length<1&&0<e.childNodes.length){var n=document.createDocumentFragment();return o.diffingDOM(e,n,s),void i[t].appendChild(n)}0<e.childNodes.length&&o.diffingDOM(e,i[t],s)}}}else i[t].parentNode.replaceChild(e.cloneNode(!0),i[t]);else a.appendChild(e.cloneNode(!0))})},t.prototype.renderChildren=function(t){t&&t.forEach(function(t){"render"in t&&t.render()})},t.prototype.render=function(){var t=document.querySelector(this.elem),e=this.stringComponent(this.template(this._state)),r=this.children.map(function(t){return t.elem});this.diffingDOM(e,t,r),t.dispatchEvent(new CustomEvent("render",{bubbles:!0,detail:this._state})),this.renderChildren(this.children)},t);function t(t){var e=this;this.children=[],this.elem=t.selector,this._state=new Proxy(t.state,this.proxyHandler()),this.template=t.template,this.efficiency=0,t.childOf&&("array"===this.typeOf(t.childOf)?t.childOf:[t.childOf]).forEach(function(t){return"attach"in t&&t.attach(e)})}var f=new u({selector:"#app",state:{showError:!1,showSuccess:!1,showDashboard:!0,showAlbum:!1,showImage:!1,currentAlbum:null,currentImage:null},template:function(t){return"\n\t<div id='loading-modal'></div>\n\t<header id=\"app-navbar\" class='header'></header>\n\t<main class=\"bg-gray-100 flex-grow\">\n\t\t<div class=\"container mx-auto p-4\">\n\t\t\t<section id='error-alert' class='mt-5 flex w-full justify-center items-center "+(t.showError?"":"hidden")+"'></section>\n\t\t\t<section id='success-alert' class='mt-5 flex w-full justify-center items-center "+(t.showSuccess?"":"hidden")+"'></section>\n\t\t\t<section id='dashboard-section' class=\""+(t.showDashboard?"":"hidden")+"\"></section>\n\t\t\t<section id='album-detail-section' class=\""+(t.showAlbum?"":"hidden")+"\"></section>\n\t\t\t<section id='image-detail-section' class=\""+(t.showImage?"":"hidden")+'"></section>\n\t\t</div>\n\t</main>\n'}}),e=new u({selector:"#dashboard-section",state:{},template:function(t){return'\n\t<div class="mt-6 w-full flex justify-center">\n\t\t<div id=\'add-album-section\' class="rounded p-2 shadow-xl flex flex-col justify-start bg-blue-600"></div>\n\t</div>\n\n\t<div class="my-6 w-full flex flex-wrap justify-center" >\n\t\t<div class="w-full mb-2 text-lg font-bold text-blue-500 border-b border-blue-500">Albums</div>\n\t\t<div class="w-full text-sm mb-4 text-gray-800">Drag and drop an album to sort it differently.</div>\n\t\t<section id="album-grid" class="w-full album-grid"></section>\n\t</div>\n'},childOf:f}),a=new u({selector:"#app-navbar",state:{isLogged:!1},template:function(t){return'\n\t<nav>\n\t\t<div class="container mx-auto">\n\t\t\t<div class="w-full flex justify-between items-center">\n\t\t\t\t<a id="home-btn" href="'+c+'" class="brand-logo">Image Gallery</a>\n\t\t\t\t<div class="flex-grow ml-6">\n\t\t\t\t\t<a id="dashboard-nav" href="#" class="btn btn-blue">Dashboard</a>\n\t\t\t\t</div>\n\t\t\t\t<div class="flex">\n\t\t\t\t\t<a id="signout-btn" href="#" class="btn btn-blue">Sign Out</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</nav>\n'},childOf:f}),i=new u({selector:"#add-album-section",state:{albumTitle:"",albumTitleError:"",genericError:!1},template:function(t){return'\n\t<div class="text-xl border-b-2 border-gray-200 mb-4 p-1 text-gray-200">Add New Album</div>\n\t<form id="add-album-form" action="#" class="flex justify-between items-center">\n\t\t<input id="add-album-title" type="text" maxlength="45" name="title" placeholder="Album Title" class="rounded p-2 flex-grow mr-4 '+(t.albumTitleError||t.genericError?"border-2 border-red-600 outline-none":"")+'" required />\n\t\t<input type="submit" class="bg-transparent text-gray-200 cursor-pointer outline-none btn btn-blue" value="Add" />\n\t</form>\n'},childOf:e}),g=new u({selector:"#album-grid",state:{albums:[],attempted:!1},template:function(t){return t.albums.length?t.albums.sort(function(t,e){return e.order-t.order}).map(function(t){return'\n\t\t<div id="album-'+t.id+'" data-id="'+t.id+'" data-order="'+t.order+'" class="album cursor-pointer shadow-lg flex flex-col p-2 rounded items-stretch bg-white text-gray-800 transition-default hover:bg-blue-200" draggable="true">\n\t\t\t<div class="pointer-events-none border-b border-gray-800 p-2"><span class="font-bold">Album Title:</span> <span>'+t.title+'</span></div>\n\t\t\t<div class="pointer-events-none border-b border-gray-800 p-2"><span class="font-bold">Created:</span> <span>'+t.createdAt+"</span></div>\n\t\t</div>\n\t"}).join(""):'<div class="rounded shadow p-4 bg-yellow-500 text-gray-800 flex justify-center items-center" draggable="false">There are no albums to show. Add one using the form above.</div>'},childOf:e}),h=new u({selector:"#error-alert",state:{message:""},template:function(t){return'\n\t<div class="w-full md:w-1/2" role="alert" >\n\t\t<div class="bg-red-500 text-white font-bold rounded-t px-4 py-2 flex justify-between">\n\t\t\t<span class="flex-grow font-bold">ERROR!</span>\n\t\t\t<button id=\'error-alert-delete\' class="alert-delete transition-default hover:text-red-800"><i class="fas fa-times pointer-events-none"></i></button>\n\t\t</div>\n\t\t<div class="border border-t-0 border-red-400 rounded-b bg-red-100 px-4 py-3 text-red-700">\n\t\t\t<p id="error-body">'+t.message+"</p>\n\t\t</div>\n\t</div>\n"}}),s=new u({selector:"#app",state:{showSuccess:!1,showError:!1,showIndex:!0},template:function(t){return'\n\t<header id="index-navbar" class=\'header\'></header>\n\t<main class="bg-gray-100 flex-grow">\n\t\t<div class="container mx-auto p-4">\n\t\t\t<section id=\'error-alert\' class=\'mt-5 flex w-full justify-center items-center '+(t.showError?"":"hidden")+"'></section>\n\t\t\t<section id='success-alert' class='mt-5 flex w-full justify-center items-center "+(t.showSuccess?"":"hidden")+"'></section>\n\t\t\t<section id='index'>\n\t\t\t\t"+(t.showIndex?'<div class="mt-12 w-full flex justify-center">\n\t\t\t\t\t<div class="text-3xl font-semibold text-gray-800">\n\t\t\t\t\t\tProject for the exam of Web Technologies\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="mt-12 w-full flex justify-center">\n\t\t\t\t\t<div class="text-xl text-gray-800">\n\t\t\t\t\t\tCheck the code here: <a class="text-blue-500 transition-default hover:text-blue-300" target="_blank" href="https://github.com/icomad/image-gallery-js">Github Repository</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>':"")+"\n\t\t\t</section>\n\t\t\t<section id='signin-section'></section>\n\t\t\t<section id='signup-section'></section>\n\t\t</div>\n\t</main>\n"}}),d=new u({selector:"#index-navbar",state:{isLogged:!1},template:function(t){return'\n\t<nav>\n\t\t<div class="container mx-auto">\n\t\t\t<div class="w-full flex justify-between items-center">\n\t\t\t\t<a id="home-btn" href="'+c+'" class="brand-logo">Image Gallery</a>\n\t\t\t\t<div class="flex-grow ml-6">\n\t\t\t\t\t<a id="dashboard-btn" href="#" class="btn btn-blue '+(t.isLogged?"":"hidden")+'">Dashboard</a>\n\t\t\t\t</div>\n\t\t\t\t<div class="flex">\n\t\t\t\t\t<a id="signout-btn" href="#" class="btn btn-blue '+(t.isLogged?"":"hidden")+'">Sign Out</a>\n\t\t\t\t\t<a id="signin-nav" href="#" class="btn btn-blue mr-3 '+(t.isLogged?"hidden":"")+'">Sign In</a>\n\t\t\t\t\t<a id="signup-nav" href="#" class="btn btn-blue '+(t.isLogged?"hidden":"")+'">Sign Up</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</nav>\n'},childOf:s}),b=new u({selector:"#success-alert",state:{message:""},template:function(t){return'\n\t<div class="w-full md:w-1/2" role="alert" >\n\t\t<div class="bg-green-500 text-white font-bold rounded-t px-4 py-2 flex justify-between">\n\t\t\t<span class="flex-grow font-bold">SUCCESS!</span>\n\t\t\t<button id=\'error-alert-delete\' class="alert-delete transition-default hover:text-green-800"><i class="fas fa-times pointer-events-none"></i></button>\n\t\t</div>\n\t\t<div class="border border-t-0 border-green-400 rounded-b bg-green-100 px-4 py-3 text-green-700">\n\t\t\t<p id="success-body">'+t.message+"</p>\n\t\t</div>\n\t</div>\n"}});new u({selector:"#signup-section",state:{username:"",password:"",passwordConfirm:"",email:"",usernameError:"",passwordError:"",emailError:"",passwordConfirmError:"",genericError:!1},template:function(t){return'\n\t<div class="w-full flex justify-center">\n\t\t<div class="w-full md:w-1/2 mt-12 rounded p-4 shadow-xl flex flex-col bg-blue-600">\n\t\t\t<div class="text-xl border-b-2 border-gray-200 mb-8 p-2 text-gray-200">Sign Up</div>\n\t\t\t<form id="signup-form" action="#">\n\t\t\t\t<input id="username-signup" type="text" maxlength="45" name="username" placeholder="Username" class="w-full rounded p-2 mb-2 '+(t.usernameError||t.genericError?"border-2 border-red-600 outline-none":"")+'" required />\n\t\t\t\t<div id="username-signup-error" class="w-full mb-2 inline-flex px-2 text-sm text-red-600 rounded font-bold '+(t.usernameError?"":"hidden")+'" style="background: rgba(255, 255, 255, .5)">'+t.usernameError+'</div>\n\n\t\t\t\t<input id="email-signup" type="email" name="email" placeholder="Email" class="w-full rounded p-2 mb-2 '+(t.emailError||t.genericError?"border-2 border-red-600 outline-none":"")+'" required />\n\t\t\t\t<div id="email-signup-error" class="w-full mb-2 inline-flex px-2 text-sm text-red-600 rounded font-bold '+(t.emailError?"":"hidden")+'" style="background: rgba(255, 255, 255, .5)">'+t.emailError+'</div>\n\n\t\t\t\t<input id="password-signup" type="password" maxlength="45" name="password" placeholder="Password" class="w-full rounded p-2 mb-2 '+(t.passwordError||t.passwordConfirmError||t.genericError?"border-2 border-red-600 outline-none":"")+'" required />\n\t\t\t\t<div id="password-signup-error" class="w-full mb-2 inline-flex px-2 text-sm text-red-600 rounded font-bold '+(t.passwordError?"":"hidden")+'" style="background: rgba(255, 255, 255, .5)">'+t.passwordError+'</div>\n\n\t\t\t\t<input id="confirm-password-signup" type="password" maxlength="45" name="passwordCheck" placeholder="Confirm Password" class="flex w-full rounded p-2 mb-2 '+(t.passwordConfirmError||t.genericError?"border-2 border-red-600 outline-none":"")+'" required />\n\t\t\t\t<div id="confirm-password-error" class="w-full mb-2 inline-flex px-2 text-sm text-red-600 rounded font-bold '+(t.passwordConfirmError?"":"hidden")+'" style="background: rgba(255, 255, 255, .5)">'+t.passwordConfirmError+'</div>\n\n\t\t\t\t<input type="submit" class="bg-transparent text-gray-200 cursor-pointer outline-none btn btn-blue" value="Sign Up" />\n\t\t\t</form>\n\t\t</div>\n\t</div>\n'}}),new u({selector:"#signin-section",state:{username:"",password:"",usernameError:"",passwordError:"",genericError:!1,remember:!1},template:function(t){return'\n\t<div class="w-full flex justify-center">\n\t<div class="w-full md:w-1/2 mt-12 rounded p-4 shadow-xl flex flex-col bg-blue-600">\n\t\t<div class="text-xl border-b-2 border-gray-200 mb-8 p-2 text-gray-200">Sign In</div>\n\t\t<form id="signin-form" action="#">\n\t\t\t<input id="username-signin" type="text" name="username" placeholder="Username" class="w-full rounded p-2 mb-2 '+(t.usernameError||t.genericError?"border-2 border-red-600 outline-none":"")+'" required />\n\t\t\t<div id="username-signin-error" class="w-full mb-2 inline-flex px-2 text-sm text-red-800 font-bold '+(t.usernameError?"":"hidden")+'">'+t.usernameError+'</div>\n\n\t\t\t<input id="password-signin" type="password" name="password" placeholder="Password" class="w-full rounded p-2 mb-2 '+(t.passwordError||t.genericError?"border-2 border-red-600 outline-none":"")+'" required />\n\t\t\t<div id="password-signin-error" class="w-full mb-2 inline-flex px-2 text-sm text-red-800 font-bold '+(t.passwordError?"":"hidden")+'">'+t.passwordError+'</div>\n\t\t\t<div class="w-full mb-2 p-2">\n\t\t\t\t<label class="text-gray-200">\n\t\t\t\t\t<input class=\'mr-4\' type="checkbox" name="remember" id="remember-signin" '+(t.remember?"checked":"")+' />\n\t\t\t\t\tRemember me?\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<input type="submit" class="bg-transparent text-gray-200 cursor-pointer outline-none btn btn-blue" value="Sign In" />\n\t\t</form>\n\t</div>\n\t</div>\n'}});function p(e,t){var r=new u({selector:"#album-detail-section",state:{album:e,images:t,imageForm:null,imageGrid:null},template:function(t){return'\n\t\t<div id="album-section-title" class="mt-2 w-full flex justify-center items-center text-3xl font-semibold text-blue-800">'+e.title+"</div>\n\t\t<div id='add-image-section' class=\"mt-6 w-full flex justify-center\"></div>\n\t\t<div class=\"my-6 w-full flex flex-wrap justify-between items-center\">\n\t\t\t\t<div class=\"w-full mb-4 text-lg font-bold text-blue-500 border-b border-blue-500\">Images</div>\n\t\t\t\t<div id='image-grid' class='w-full flex justify-between items-center'></div>\n\t\t</div>\n\t"},childOf:f});r.render();var n,a,s=(n=r.state.album.id,(a=new u({selector:"#add-image-section",state:{albumId:n,file:null,description:"",title:""},template:function(t){return'\n\t\t<div class="rounded p-2 shadow-xl flex flex-col bg-blue-600">\n\t\t\t<div class="text-xl border-b-2 border-gray-200 mb-4 py-1 px-8 text-gray-200">Add Image</div>\n\t\t\t<form id="add-image-form" action="#" class="flex flex-col">\n\t\t\t\t\t<input id="add-image-file" type="file" name="imageFile" placeholder="Image File" class="cursor-pointer rounded p-2 mb-2 text-gray-800 bg-white" required />\n\t\t\t\t\t<input id="add-image-title" type="text" maxlength="45" name="title" placeholder="Image Title" class="rounded p-2 mb-2" required />\n\t\t\t\t\t<textarea style="resize: none" id="add-image-description" type="text" rows="4" maxlength="255" name="description" placeholder="Image Description" class="rounded p-2 mb-2" required></textarea>\n\t\t\t\t\t<input type="submit" class="bg-transparent text-gray-200 cursor-pointer outline-none btn btn-blue" value="Add" />\n\t\t\t</form>\n\t\t</div>\n\t'},childOf:r})).render(),a);r.state.imageForm=s;var o,i,l=(o=r.state.images,(i=new u({selector:"#image-grid",state:{images:o,page:1},template:function(r){return r.images.length?'\n\t\t<div class="mr-4 '+(1<r.page?"":"hidden")+'">\n\t\t\t<a id="prev-page-btn" href="#" class="text-gray-800 transition-default hover:text-blue-500 text-4xl">\n\t\t\t\t<i class="fas fa-chevron-circle-left pointer-events-none"></i>\n\t\t\t</a>\n\t\t</div>\n\t\t<div class=\'flex-grow image-grid\'>\n\t\t\t'+r.images.sort(function(t,e){return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()}).map(function(t,e){return'\n\t\t\t\t<div id="image-'+t.id+'" data-id="'+t.id+'" class="image cursor-pointer shadow-lg flex flex-col p-2 rounded items-center bg-white text-gray-800 transition-default hover:bg-blue-200 '+(e<5*r.page&&e>=5*r.page-5?"":"hidden")+'">\n\t\t\t\t\t<div class="pointer-events-none rounded-full flex w-24 h-24 overflow-hidden">\n\t\t\t\t\t\t<img src="/resources/images/thumbnail_'+t.path+'" alt="'+t.title+'" style="object-fit: cover" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="pointer-events-none border-b border-gray-800 text-gray-800 self-stretch text-center mt-2">\n\t\t\t\t\t\t<span class="font-bold">Title:</span> <span>'+t.title+"</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"}).join("")+'\n\t\t</div>\n\t\t<div class="ml-4 '+(r.page<o.length/5?"":"hidden")+'">\n\t\t\t<a id="next-page-btn" href="#" class="text-gray-800 transition-default hover:text-blue-500 text-4xl">\n\t\t\t\t<i class="fas fa-chevron-circle-right pointer-events-none"></i>\n\t\t\t</a>\n\t\t</div>\n\t':'\n\t\t<div class="w-full rounded shadow p-4 bg-yellow-500 text-gray-800 flex justify-center items-center">No images to show! Add one using the form above.</div>\n\t'},childOf:r})).render(),i);return r.state.imageGrid=l,r}var v=new u({selector:"#loading-modal",state:{showModal:!1,text:""},template:function(t){return t.showModal?"\n\t<div class='w-full h-full fixed block top-0 left-0 bg-white opacity-75 z-50'>\n\t\t<div class='flex justify-center items-center flex-col h-full w-full'>\n\t\t\t<div class='text-red-800 font-bold text-xl mb-5'>"+t.text+'</div>\n\t\t\t<span class="text-red-800 text-5xl">\n\t\t\t\t\t<i class="fas fa-circle-notch fa-spin"></i>\n\t\t\t\t</span>\n\t\t</div>\n\t</div>\n':""},childOf:f});var w=function(t,o,i,l){return new(i=i||Promise)(function(r,e){function n(t){try{s(l.next(t))}catch(t){e(t)}}function a(t){try{s(l.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?r(t.value):((e=t.value)instanceof i?e:new i(function(t){t(e)})).then(n,a)}s((l=l.apply(t,o||[])).next())})},y=function(r,n){var a,s,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,s&&(o=2&e[0]?s.return:e[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,e[1])).done)return o;switch(s=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return i.label++,{value:e[1],done:!1};case 5:i.label++,s=e[1],e=[0];continue;case 7:e=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){i=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){i.label=e[1];break}if(6===e[0]&&i.label<o[1]){i.label=o[1],o=e;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(e);break}o[2]&&i.ops.pop(),i.trys.pop();continue}e=n.call(r,i)}catch(t){e=[6,t],s=0}finally{a=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},x=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,s=r.call(t),o=[];try{for(;(void 0===e||0<e--)&&!(n=s.next()).done;)o.push(n.value)}catch(t){a={error:t}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(a)throw a.error}}return o},E=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(x(arguments[e]));return t},S=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function A(s){return w(this,void 0,void 0,function(){var e,r,n,a;return y(this,function(t){switch(t.label){case 0:if(!s.target.matches("#album-grid")||g.state.attempted)return[2];g.state.attempted=!0,t.label=1;case 1:return t.trys.push([1,9,,10]),[4,fetch(c+"/albums")];case 2:switch(e=t.sent(),e.status){case 200:return[3,3];case 500:return[3,5]}return[3,7];case 3:return[4,e.json()];case 4:return r=t.sent(),g.state.albums=E(r),o(document.getElementById("album-grid"),function(){return function(){return w(this,void 0,void 0,function(){var e,r,n,a,s,o,i;return y(this,function(t){switch(t.label){case 0:e=function(e){var r,n,a,s,o,i;return y(this,function(t){switch(t.label){case 0:r=e.dataset.id,n=e.dataset.order,(a=new FormData).append("albumId",r),a.append("newOrder",n),g.state.albums.find(function(t){return t.id===parseInt(r)}).order=parseInt(n),t.label=1;case 1:return t.trys.push([1,6,,7]),[4,fetch(c+"/albums",{method:"PUT",body:a})];case 2:return 200===(s=t.sent()).status?[3,4]:[4,s.json()];case 3:return o=t.sent(),h.state.message="OPS! Something went wrong! "+o.error,f.state.showError=!0,f.attach(h),[2,"continue"];case 4:return[4,s.json()];case 5:return t.sent(),[3,7];case 6:return i=t.sent(),h.state.message="Something went wrong! Possible network error!",f.state.showError=!0,f.attach(h),console.error(i),[3,7];case 7:return[2]}})},t.label=1;case 1:t.trys.push([1,6,7,8]),r=S(document.getElementById("album-grid").children),n=r.next(),t.label=2;case 2:return n.done?[3,5]:(a=n.value,[5,e(a)]);case 3:t.sent(),t.label=4;case 4:return n=r.next(),[3,2];case 5:return[3,8];case 6:return s=t.sent(),o={error:s},[3,8];case 7:try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}return[7];case 8:return[2]}})})}()}),[2];case 5:return[4,e.json()];case 6:return n=t.sent(),h.state.message="OPS! Something went wrong! "+n.error,f.state.showError=!0,f.attach(h),[2];case 7:return[3,8];case 8:return[3,10];case 9:return a=t.sent(),h.state.message="Something went wrong! Possible network error!",f.state.showError=!0,f.attach(h),console.error(a),[3,10];case 10:return[2]}})})}function j(l){var d;return w(this,void 0,void 0,function(){var r,n,a,s,o,i;return y(this,function(t){switch(t.label){case 0:if(!("matches"in(r=l.target)&&r.matches(".image")))return[2];if(void 0===(n=null===(d=f.state.currentAlbum)||void 0===d?void 0:d.state.images.find(function(t){return t.id===parseInt(r.dataset.id)})))return[2];t.label=1;case 1:return t.trys.push([1,9,,10]),[4,fetch(c+"/comments?imageId="+n.id)];case 2:switch(s=t.sent(),s.status){case 200:return[3,3];case 400:case 500:return[3,5]}return[3,7];case 3:return[4,s.json()];case 4:return a=t.sent(),(e=new u({selector:"#image-detail-section",state:{image:n,comments:a,commentBody:"",commentBodyError:!1},template:function(t){return'\n\t\t<div id=\'image-detail-modal\' class=\'w-full h-full flex justify-center items-center fixed block top-0 left-0 z-50\' style="background: rgba(0, 0, 0, .45)">\n\t\t\t<div class=\'p-8 rounded w-11/12 flex flex-col md:flex-row justify-between text-gray-800 bg-gray-100\' style="max-height: 90vh;">\n\t\t\t\t<div class="w-full md:w-2/3 flex flex-col justify-between">\n\t\t\t\t\t<div class="rounded p-2 shadow-lg bg-white flex flex-col justify-start mb-5">\n\t\t\t\t\t\t<div class="border-b border-gray-500 p-1 flex justify-start items-center">\n\t\t\t\t\t\t\t<span class="font-bold">Title:</span>&nbsp;\n\t\t\t\t\t\t\t<span>'+t.image.title+'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="border-b border-gray-500 p-1 flex justify-start items-center">\n\t\t\t\t\t\t\t<span class="font-bold">Description:</span>&nbsp;\n\t\t\t\t\t\t\t<span>'+t.image.description+'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="border-b border-gray-500 p-1 flex justify-start items-center">\n\t\t\t\t\t\t\t<span class="font-bold">Created:</span>&nbsp;\n\t\t\t\t\t\t\t<span>'+t.image.createdAt+'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="flex-grow rounded overflow-hidden shadow-lg flex justify-center items-center bg-white">\n\t\t\t\t\t\t<img class=\'w-full h-full\' src="/resources/images/'+t.image.path+'" alt="'+t.image.title+'" style="object-fit: contain;">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="mt-5 md:mt-0 md:ml-5 w-full md:w-1/3 flex flex-col justify-between items-stretch rounded shadow-lg bg-white">\n\t\t\t\t\t<div class="relative flex-grow flex flex-col justify-start border-b border-black-800 overflow-auto">\n\t\t\t\t\t\t<div class="rounded bg-white sticky top-0 z-40 flex justify-start items-center border-b border-black-800 p-4 font-bold mb-2">Comments</div>\n\t\t\t\t\t\t<div class="flex-grow overflow-y-auto overflow-x-hidden absolute mt-12 w-11/12 p-4">\n\t\t\t\t\t\t\t'+t.comments.map(function(t){return'\n\t\t\t\t\t\t\t\t<div class="rounded py-1 px-2 w-full flex flex-col bg-blue-200 mb-1">\n\t\t\t\t\t\t\t\t\t<div style="word-break: break-word;overflow-wrap:break-word">'+t.comment.body+'</div>\n\t\t\t\t\t\t\t\t\t<div class="text-sm italic font-semibold">\n\t\t\t\t\t\t\t\t\t\t- '+t.username+" ("+new Date(t.comment.createdAt).toLocaleString()+")\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t"}).join("")+'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="flex p-4">\n\t\t\t\t\t\t<form id=\'add-comment-form\' class="w-full flex justify-between" action="#">\n\t\t\t\t\t\t\t<input id=\'add-comment-body\' type="text" name="add-comment-body" placeholder="Write here..." class="flex-grow rounded p-2 bg-gray-200 '+(t.commentBodyError?"border-2 border-red-600 outline-none text-red-600":"")+'" required />\n\t\t\t\t\t\t\t<input type="submit" class="bg-transparent text-gray-800 cursor-pointer outline-none btn btn-blue ml-2" value="Send" required />\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t'},childOf:f})).render(),f.state.currentImage=e,f.state.showImage=!0,[2];case 5:return[4,s.json()];case 6:return o=t.sent(),h.state.message="Something went wrong! "+o.error,f.state.showError=!0,f.attach(h),[2];case 7:return[2];case 8:return[3,10];case 9:return i=t.sent(),h.state.message="Something went wrong! Possible network error!",f.state.showError=!0,f.attach(h),console.error(i),[3,10];case 10:return[2]}var e})})}document.addEventListener("DOMContentLoaded",function(){!function(){if(null!==sessionStorage.getItem("user"))return 1;if(null!==localStorage.getItem("user")){var t=JSON.parse(localStorage.getItem("user"));if((new Date).getTime()<t.expiry)return 1;localStorage.removeItem("user")}}()&&(window.location.href=c),document.addEventListener("render",function(t){A(t)}),document.addEventListener("click",function(t){t.target.matches("#success-alert-delete")&&(!d.state.isLogged&&a.state.isLogged?(f.state.showSuccess=!1,f.detach(b)):(s.state.showSuccess=!1,s.detach(b))),t.target.matches("#error-alert-delete")&&(!d.state.isLogged&&a.state.isLogged?(f.state.showError=!1,f.detach(h)):(s.state.showError=!1,s.detach(h))),function(r){w(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:if(!r.target.matches("#signout-btn"))return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,fetch(c+"/signout")];case 2:return 200===t.sent().status?(sessionStorage.removeItem("user"),localStorage.removeItem("user"),b.state.message="You successfully signed out!",f.state.showSuccess=!0,f.attach(b),window.location.href=c):(h.state.message="Something went wrong!",f.state.showError=!0,f.attach(h)),[3,4];case 3:return e=t.sent(),h.state.message="Something went wrong! Possible network error!",f.state.showError=!0,f.attach(h),console.error(e),[3,4];case 4:return[2]}})})}(t),t.target.matches("#dashboard-nav")&&(f.state.showDashboard=!0,f.state.showAlbum=!1,f.state.currentAlbum=null),function(d){w(this,void 0,void 0,function(){var e,r,n,a,s,o,i,l;return y(this,function(t){switch(t.label){case 0:if(!(e=d.target).matches(".album"))return[2];r=parseInt(e.dataset.id),n=g.state.albums.find(function(t){return t.id===r}),t.label=1;case 1:return t.trys.push([1,9,,10]),[4,fetch(c+"/images?albumId="+r)];case 2:switch(s=t.sent(),s.status){case 200:return[3,3];case 400:case 500:return[3,5]}return[3,7];case 3:return[4,s.json()];case 4:return a=t.sent(),o=p(n,a),f.state.currentAlbum=o,f.state.showDashboard=!1,f.state.showAlbum=!0,[2];case 5:return[4,s.json()];case 6:return i=t.sent(),h.state.message="Something went wrong! "+i.error,f.state.showError=!0,f.attach(h),[2];case 7:return[3,8];case 8:return[3,10];case 9:return l=t.sent(),h.state.message="Something went wrong! Possible network error!",f.state.showError=!0,f.attach(h),console.error(l),[3,10];case 10:return[2]}})})}(t),t.target.matches("#prev-page-btn")&&f.state.currentAlbum&&f.state.currentAlbum.state.imageGrid&&--f.state.currentAlbum.state.imageGrid.state.page,t.target.matches("#next-page-btn")&&f.state.currentAlbum&&f.state.currentAlbum.state.imageGrid&&(f.state.currentAlbum.state.imageGrid.state.page+=1),t.target.matches("#image-detail-modal")&&(f.state.showImage=!1,f.state.currentImage=null)}),document.addEventListener("submit",function(t){!function(o){w(this,void 0,void 0,function(){var e,r,n,a,s;return y(this,function(t){switch(t.label){case 0:if(!o.target.matches("#add-album-form"))return[2];o.preventDefault(),(e=new FormData).append("title",i.state.albumTitle),t.label=1;case 1:return t.trys.push([1,9,,10]),[4,fetch(c+"/albums",{method:"post",body:e})];case 2:switch(r=t.sent(),r.status){case 200:return[3,3];case 400:case 500:return[3,5]}return[3,7];case 3:return[4,r.json()];case 4:return n=t.sent(),g.state.albums.push(n),i.state.albumTitle="",i.state.albumTitleError="",i.state.genericError=!1,document.querySelector("#add-album-form").reset(),g.render(),[2];case 5:return[4,r.json()];case 6:return a=t.sent(),i.state.genericError=!0,h.state.message=a.error,f.state.showError=!0,f.attach(h),[2];case 7:return[3,8];case 8:return[3,10];case 9:return s=t.sent(),h.state.message="Something went wrong! Possible network error!",f.state.showError=!0,f.attach(h),console.error(s),[3,10];case 10:return[2]}})})}(t),function(i){var l;w(this,void 0,void 0,function(){var e,r,n,a,s,o;return y(this,function(t){switch(t.label){case 0:if(!i.target.matches("#add-image-form"))return[2];if(i.preventDefault(),v.state.showModal=!0,v.state.text="Uploading image...",document.querySelector("body").style.pointerEvents="none",!f.state.currentAlbum||!f.state.currentAlbum.state.imageForm)return[2];e=f.state.currentAlbum.state.imageForm,(r=new FormData).append("albumId",e.state.albumId.toString()),r.append("title",e.state.title),r.append("description",e.state.description),r.append("imageFile",e.state.file,null===(l=e.state.file)||void 0===l?void 0:l.name),t.label=1;case 1:return t.trys.push([1,9,,10]),[4,fetch(c+"/images",{method:"post",body:r})];case 2:switch(n=t.sent(),n.status){case 200:return[3,3];case 400:case 500:return[3,5]}return[3,7];case 3:return[4,n.json()];case 4:return a=t.sent(),f.state.currentAlbum.state.images.push(a),f.state.currentAlbum.render(),e.state.description="",e.state.title="",e.state.file=null,document.querySelector("#add-image-form").reset(),v.state.showModal=!1,document.querySelector("body").style.pointerEvents="auto",f.state.currentAlbum.state.imageGrid.state.page=1,[2];case 5:return[4,n.json()];case 6:return s=t.sent(),h.state.message="Something went wrong! "+s.error,f.state.showError=!0,f.attach(h),v.state.showModal=!1,document.querySelector("body").style.pointerEvents="auto",[2];case 7:return[2];case 8:return[3,10];case 9:return o=t.sent(),h.state.message="Something went wrong! Possible network error!",f.state.showError=!0,f.attach(h),v.state.showModal=!1,document.querySelector("body").style.pointerEvents="auto",console.error(o),[3,10];case 10:return[2]}})})}(t),function(i){w(this,void 0,void 0,function(){var e,r,n,a,s,o;return y(this,function(t){switch(t.label){case 0:if(!i.target.matches("#add-comment-form"))return[2];if(!f.state.currentImage)return[2];if(i.preventDefault(),""===(e=f.state.currentImage).state.commentBody.trim())return e.state.commentBodyError=!0,document.querySelector("#add-comment-body").value="You cannot send empty message!",[2];r=new FormData,console.log(e.state.commentBody),r.append("body",e.state.commentBody),r.append("imageId",e.state.image.id.toString()),t.label=1;case 1:return t.trys.push([1,9,,10]),[4,fetch(c+"/comments",{method:"post",body:r})];case 2:switch(n=t.sent(),n.status){case 200:return[3,3];case 400:case 500:return[3,5]}return[3,7];case 3:return[4,n.json()];case 4:return a=t.sent(),e.state.comments.push(a),e.render(),e.state.commentBody="",document.querySelector("#add-comment-form").reset(),[2];case 5:return[4,n.json()];case 6:return s=t.sent(),h.state.message="Something went wrong! "+s.error,f.state.showError=!0,f.attach(h),f.state.showImage=!1,f.state.currentImage=null,[2];case 7:return[3,8];case 8:return[3,10];case 9:return o=t.sent(),h.state.message="Something went wrong! Possible network error!",f.state.showError=!0,f.attach(h),f.state.showImage=!1,f.state.currentImage=null,console.error(o),[3,10];case 10:return[2]}})})}(t)}),document.addEventListener("focusin",function(t){var e;(e=t.target).matches("#add-comment-body")&&f.state.currentImage&&f.state.currentImage.state.commentBodyError&&(e.value="",f.state.currentImage.state.commentBodyError=!1)}),document.addEventListener("change",function(t){var e,r,n,a,s;(e=t.target).matches("#add-album-title")&&(i.state.albumTitle=e.value),(r=t.target).matches("#add-image-file")&&f.state.currentAlbum&&f.state.currentAlbum.state.imageForm&&null!==r.files&&(f.state.currentAlbum.state.imageForm.state.file=r.files[0]),(n=t.target).matches("#add-image-title")&&f.state.currentAlbum&&f.state.currentAlbum.state.imageForm&&(f.state.currentAlbum.state.imageForm.state.title=n.value),(a=t.target).matches("#add-image-description")&&f.state.currentAlbum&&f.state.currentAlbum.state.imageForm&&(f.state.currentAlbum.state.imageForm.state.description=a.value),(s=t.target).matches("#add-comment-body")&&f.state.currentImage&&(f.state.currentImage.state.commentBody=s.value)}),document.addEventListener("mouseover",function(t){j(t)}),a.state.isLogged=!0,f.render(),v.render(),a.render(),e.render(),i.render(),g.render()})}();
